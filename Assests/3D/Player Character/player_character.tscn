[gd_scene format=3 uid="uid://cj3ygyynwwo0q"]

[ext_resource type="PackedScene" uid="uid://bmmhldj3h2120" path="res://Assests/3D/Player Character/PC_Main.glb" id="1_hnf8f"]
[ext_resource type="Material" uid="uid://dvmvo1ejv7urt" path="res://Assests/3D/Materials/PlayerCharacter.tres" id="2_hf0kq"]
[ext_resource type="AnimationLibrary" uid="uid://cqcxa23b5sud8" path="res://Assests/3D/Player Character/player_anim_library.res" id="2_xkx46"]

[sub_resource type="GDScript" id="GDScript_hf0kq"]
resource_name = "animated_character"
script/source = "@tool
extends Node3D

#INFO it's a tool script to see animation changes in real time

@export var character_material: ShaderMaterial
@onready var AnimTree = $AnimationTree as AnimationTree
@export_enum(\"Idle\", \"Walk\", \"Sprint\") var movement_state := \"Idle\":
	set(to):
		if to != movement_state:
			AnimTree.set(\"parameters/Movement/transition_request\", to)
		movement_state = to

var total_time := 0.0

var tracked_position := self.global_position
var fire_direction := Vector3.UP
var fire_strength := 0.75

func _process(delta: float):
	total_time += delta
	
	tracked_position = lerp(tracked_position, self.global_position, 6.0 * delta);
	fire_direction = lerp(fire_direction, to_local(tracked_position) + Vector3.UP, 12.0 * delta)
	
	fire_strength = 0.5 + (0.125 * sin(total_time * 1.0))
	
	if character_material:
		character_material.set_shader_parameter(\"vertex_fire_direction\", fire_direction)
		character_material.set_shader_parameter(\"vertex_fire_strength\", fire_strength)
"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_c7dpk"]
animation = &"Idle"

[sub_resource type="Curve" id="Curve_n0b8t"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(0.6529127, 0.27528095), 1.0892268, 1.0892268, 0, 0, Vector2(1, 1), 3.3130648, 0.0, 0, 0]
point_count = 3

[sub_resource type="AnimationNodeTransition" id="AnimationNodeTransition_drh1g"]
xfade_time = 0.35
xfade_curve = SubResource("Curve_n0b8t")
input_0/name = "Idle"
input_0/auto_advance = false
input_0/break_loop_at_end = false
input_0/reset = true
input_1/name = "Walk"
input_1/auto_advance = false
input_1/break_loop_at_end = false
input_1/reset = true
input_2/name = "Sprint"
input_2/auto_advance = false
input_2/break_loop_at_end = false
input_2/reset = true

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_jcx3l"]
animation = &"Sprint"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_tqv1g"]
animation = &"Walk"

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_wvdep"]
nodes/output/position = Vector2(100, 80)
nodes/Movement/node = SubResource("AnimationNodeTransition_drh1g")
nodes/Movement/position = Vector2(-120, 80)
nodes/Idle/node = SubResource("AnimationNodeAnimation_c7dpk")
nodes/Idle/position = Vector2(-400, 0)
nodes/Walk/node = SubResource("AnimationNodeAnimation_tqv1g")
nodes/Walk/position = Vector2(-400, 140)
nodes/Sprint/node = SubResource("AnimationNodeAnimation_jcx3l")
nodes/Sprint/position = Vector2(-400, 280)
node_connections = [&"output", 0, &"Movement", &"Movement", 0, &"Idle", &"Movement", 1, &"Walk", &"Movement", 2, &"Sprint"]

[node name="Player_Character" unique_id=1831994608 instance=ExtResource("1_hnf8f")]
script = SubResource("GDScript_hf0kq")
character_material = ExtResource("2_hf0kq")

[node name="Skeleton3D" parent="root" parent_id_path=PackedInt32Array(181240142) index="0" unique_id=119676049]
bones/0/scale = Vector3(1, 0.99999994, 0.9999999)
bones/1/position = Vector3(0.0025003953, 0.6984395, 0.07257051)
bones/1/rotation = Quaternion(-3.9733123e-09, -3.3429556e-06, -4.711277e-14, 1)
bones/1/scale = Vector3(1, 1.0000001, 1)
bones/2/position = Vector3(-2.621498e-07, 0.25603336, -0.037915066)
bones/2/rotation = Quaternion(-0.08504458, 3.444545e-06, 2.940049e-07, 0.99637717)
bones/3/rotation = Quaternion(0.025164034, -3.562741e-15, -3.5454703e-16, 0.9996833)
bones/6/rotation = Quaternion(-0.039294798, -2.0355075e-17, -3.1268798e-16, 0.99922776)
bones/7/rotation = Quaternion(-0.8026833, -0.057759944, -0.085337736, 0.5874358)
bones/8/rotation = Quaternion(0.35686615, 0.04263704, -0.058965947, 0.93131715)
bones/10/rotation = Quaternion(-0.48733503, -0.16805917, 0.26795483, 0.813917)
bones/10/scale = Vector3(1.0000001, 0.9999977, 0.9999998)
bones/11/rotation = Quaternion(6.1976135e-07, 0.3230795, -2.1751498e-07, 0.9463719)
bones/11/scale = Vector3(1.0000001, 1.0000024, 1)
bones/12/rotation = Quaternion(3.6790462e-07, 0.24438557, -1.410302e-07, 0.96967816)
bones/12/scale = Vector3(1.0000002, 1.0000004, 1)
bones/13/rotation = Quaternion(7.837757e-07, 0.16371958, -1.0126907e-07, 0.98650694)
bones/13/scale = Vector3(1.0000002, 1.0000004, 1)
bones/14/rotation = Quaternion(9.264312e-08, 0.08176287, -8.783141e-08, 0.9966519)
bones/14/scale = Vector3(0.99999994, 0.99999994, 1)
bones/15/rotation = Quaternion(9.358325e-07, 0.00023831484, 0.0025407074, 0.9999967)
bones/15/scale = Vector3(0.9999997, 1.0000024, 0.99999994)
bones/16/rotation = Quaternion(5.1781882e-08, 0.24486804, -2.0152463e-07, 0.9695565)
bones/16/scale = Vector3(1.0000001, 1.0000004, 0.9999999)
bones/17/rotation = Quaternion(9.1580176e-08, 0.17888702, -8.550396e-08, 0.98386973)
bones/17/scale = Vector3(1, 0.9999999, 0.99999994)
bones/18/rotation = Quaternion(-2.1948923e-08, 0.11309296, 2.0621437e-08, 0.99358445)
bones/18/scale = Vector3(0.99999976, 0.9999995, 0.9999997)
bones/19/rotation = Quaternion(-2.1082359e-08, 0.04643615, 1.572285e-07, 0.99892133)
bones/19/scale = Vector3(0.9999998, 0.9999999, 0.9999999)
bones/20/rotation = Quaternion(0.115744345, 0.28051987, -0.0339974, 0.9522375)
bones/22/rotation = Quaternion(-0.49005327, 0.1678388, -0.26962498, 0.81177604)
bones/22/scale = Vector3(1.0000002, 0.99999905, 1.0000001)
bones/23/rotation = Quaternion(8.282513e-07, -0.32442862, 7.617659e-08, 0.9459103)
bones/23/scale = Vector3(1.0000001, 1.0000015, 1.0000001)
bones/24/rotation = Quaternion(6.402242e-07, -0.24495918, 2.634359e-08, 0.9695334)
bones/24/scale = Vector3(0.9999996, 0.9999996, 0.9999998)
bones/25/rotation = Quaternion(9.513016e-07, -0.16364016, 7.695139e-08, 0.9865202)
bones/25/scale = Vector3(1, 1.0000004, 1.0000002)
bones/26/rotation = Quaternion(1.8059036e-07, -0.08174776, 1.18475384e-07, 0.99665314)
bones/26/scale = Vector3(0.9999998, 0.99999994, 0.9999998)
bones/27/rotation = Quaternion(8.444498e-07, 0.00010791303, -0.0025386813, 0.99999684)
bones/27/scale = Vector3(0.99999994, 1.0000007, 0.9999998)
bones/28/rotation = Quaternion(2.1678721e-08, -0.24382415, 1.9525365e-07, 0.9698195)
bones/28/scale = Vector3(1.0000001, 0.99999887, 1)
bones/29/rotation = Quaternion(1.209869e-07, -0.17894474, 1.2998063e-07, 0.9838592)
bones/29/scale = Vector3(0.99999976, 0.9999998, 0.9999999)
bones/30/rotation = Quaternion(-8.173201e-08, -0.11287315, 1.4351538e-07, 0.9936094)
bones/30/scale = Vector3(0.9999999, 0.99999976, 1)
bones/31/rotation = Quaternion(-2.4336195e-08, -0.046486095, -1.4944185e-07, 0.99891895)
bones/31/scale = Vector3(1.0000005, 1.0000002, 0.99999994)
bones/32/rotation = Quaternion(0.11920235, -0.2808975, 0.035621792, 0.95163995)
bones/32/scale = Vector3(0.99999994, 1, 0.9999998)
bones/33/position = Vector3(0.20661853, 0.008372958, 0.0023716723)
bones/33/rotation = Quaternion(0.901725, 0.24540725, 0.3353862, -0.11909407)
bones/33/scale = Vector3(1, 1.0000001, 1.0000001)
bones/34/rotation = Quaternion(2.0244275e-07, -0.24352348, 1.300967e-09, 0.969895)
bones/34/scale = Vector3(1, 1.0000002, 1)
bones/35/rotation = Quaternion(1.9173976e-07, -0.18345281, 1.5163933e-09, 0.98302853)
bones/35/scale = Vector3(0.99999994, 0.9999998, 1)
bones/36/rotation = Quaternion(3.4812903e-08, -0.12268865, 7.186223e-08, 0.99244523)
bones/37/rotation = Quaternion(-8.71926e-08, -0.061460435, -5.6801028e-08, 0.9981096)
bones/37/scale = Vector3(1.0000001, 1, 1)
bones/38/rotation = Quaternion(1.7775275e-07, -6.992614e-08, 0.2721375, 0.9622584)
bones/38/scale = Vector3(1, 1.0000002, 1.0000002)
bones/39/rotation = Quaternion(-0.149147, -0.58926916, 0.7633393, -0.21870145)
bones/39/scale = Vector3(0.9999949, 0.9999998, 0.9999996)
bones/40/rotation = Quaternion(0.073943555, 0.9954098, -0.041992705, 0.04391336)
bones/40/scale = Vector3(1.0000006, 1, 1.0000001)
bones/41/rotation = Quaternion(-4.7251825e-07, -0.24131411, -4.537221e-07, 0.97044706)
bones/41/scale = Vector3(1, 1.0000002, 1)
bones/42/rotation = Quaternion(-3.0319856e-07, -0.18177375, -3.0056574e-07, 0.98334044)
bones/42/scale = Vector3(1.0000002, 1, 1.0000001)
bones/43/rotation = Quaternion(-1.8917021e-07, -0.12155855, -2.2546364e-07, 0.9925843)
bones/43/scale = Vector3(1, 0.99999964, 1)
bones/44/rotation = Quaternion(-5.3339036e-08, -0.06089244, 5.700949e-08, 0.9981443)
bones/44/scale = Vector3(1, 0.99999994, 0.99999994)
bones/45/position = Vector3(-0.20661844, 0.008373113, 0.0023745091)
bones/45/rotation = Quaternion(0.9028055, -0.24530564, -0.33160463, -0.121679515)
bones/45/scale = Vector3(1, 1, 0.9999999)
bones/46/rotation = Quaternion(5.3933394e-07, 0.24009573, -1.1989738e-06, 0.97074926)
bones/46/scale = Vector3(1.0000002, 1, 0.99999994)
bones/47/rotation = Quaternion(4.6145755e-07, 0.18084781, -8.434776e-07, 0.9835112)
bones/47/scale = Vector3(1.0000002, 1.0000001, 1.0000002)
bones/48/rotation = Quaternion(2.0356057e-07, 0.12093561, -6.299322e-07, 0.9926604)
bones/48/scale = Vector3(1.0000002, 1.0000002, 1.0000004)
bones/49/rotation = Quaternion(1.6209783e-07, 0.06057897, -2.3673483e-07, 0.9981634)
bones/49/scale = Vector3(0.9999999, 0.99999994, 0.99999994)
bones/50/rotation = Quaternion(2.3652314e-07, 1.917432e-07, -0.2641501, 0.9644816)
bones/50/scale = Vector3(1, 1.0000005, 1.0000004)
bones/51/rotation = Quaternion(0.14174971, -0.5903924, 0.7631097, 0.22137645)
bones/51/scale = Vector3(0.9999949, 0.9999996, 0.9999995)
bones/52/rotation = Quaternion(-0.07394325, 0.9954099, -0.041992147, -0.043913327)
bones/52/scale = Vector3(1.0000005, 0.99999934, 1)
bones/53/rotation = Quaternion(-4.4384146e-07, 0.23738448, 5.166345e-07, 0.97141576)
bones/53/scale = Vector3(1, 1, 0.9999999)
bones/54/rotation = Quaternion(-2.8832346e-07, 0.17878796, 3.3645043e-07, 0.9838877)
bones/54/scale = Vector3(0.99999976, 1, 1.0000002)
bones/55/rotation = Quaternion(-2.128769e-07, 0.11954965, 2.89347e-07, 0.9928283)
bones/55/scale = Vector3(0.99999976, 0.99999946, 0.9999996)
bones/56/rotation = Quaternion(-3.4299955e-08, 0.05988244, -4.9599275e-10, 0.99820554)
bones/56/scale = Vector3(0.9999998, 1.0000001, 1.0000002)
bones/57/position = Vector3(-4.6498738e-07, 1.0374953, -0.06811291)
bones/57/rotation = Quaternion(-8.882117e-16, 3.4133577e-06, -5.0821977e-21, 1)
bones/58/position = Vector3(0.07303355, -5.5655084e-07, 0.2725652)
bones/58/rotation = Quaternion(-0.033259973, 0.5868865, 0.7183729, -0.37201938)
bones/58/scale = Vector3(0.9999999, 0.99999994, 0.99999994)
bones/59/position = Vector3(0.12603945, 0.17100067, 0.014392171)
bones/59/scale = Vector3(0.926165, 0.9261649, 0.926165)
bones/60/position = Vector3(0.051321167, 0.12051005, -0.122589424)
bones/60/rotation = Quaternion(2.4913453e-07, -1.3667743e-06, 2.117534e-07, 1)
bones/60/scale = Vector3(0.8517223, 0.8517226, 0.8517224)
bones/61/position = Vector3(-0.013407464, -0.046568766, -0.52028435)
bones/61/scale = Vector3(0.9144398, 0.91443986, 0.9144399)
bones/62/position = Vector3(0.19953154, -4.500685e-07, 0.19953167)
bones/62/rotation = Quaternion(0.30501312, 0.5077377, 0.6867784, -0.4213133)
bones/62/scale = Vector3(1.0000004, 1.0000002, 0.99999994)
bones/63/position = Vector3(0.11244341, 0.11364546, -0.038829096)
bones/63/scale = Vector3(0.92752814, 0.92752796, 0.92752814)
bones/64/position = Vector3(0.02136122, 0.14265776, -0.123490095)
bones/64/rotation = Quaternion(2.9808552e-07, 3.8145703e-07, 2.3125638e-08, 1)
bones/64/scale = Vector3(0.85721886, 0.85721886, 0.85721886)
bones/65/position = Vector3(-0.08068876, 0.19316486, -0.40478137)
bones/65/scale = Vector3(0.91627085, 0.9162708, 0.9162707)
bones/66/position = Vector3(0.27256504, -6.793098e-07, 0.07303369)
bones/66/rotation = Quaternion(-0.42336276, -0.35903156, -0.6340413, 0.53837913)
bones/67/position = Vector3(0.09172168, 0.07974387, -0.046422333)
bones/67/scale = Vector3(0.9261651, 0.92616504, 0.92616516)
bones/68/position = Vector3(0.052212596, 0.14683034, -0.118764654)
bones/68/scale = Vector3(0.8517222, 0.8517222, 0.85172224)
bones/69/position = Vector3(0.11600836, 0.21943624, -0.32619777)
bones/69/scale = Vector3(0.9144398, 0.91444, 0.9144398)
bones/70/position = Vector3(0.2725651, -4.2238992e-07, -0.07303368)
bones/70/rotation = Quaternion(-0.62130934, -0.4131778, -0.39425504, 0.5364903)
bones/70/scale = Vector3(1.0000004, 0.99999994, 1.0000004)
bones/71/position = Vector3(0.027175436, 0.059696093, -0.072733)
bones/71/scale = Vector3(0.9275275, 0.9275278, 0.92752784)
bones/72/position = Vector3(0.0064574922, 0.1332709, -0.12690738)
bones/72/scale = Vector3(0.8572191, 0.8572189, 0.8572193)
bones/73/position = Vector3(0.10005593, 0.19678459, -0.3542197)
bones/73/scale = Vector3(0.9162703, 0.9162705, 0.9162705)
bones/74/position = Vector3(0.1995314, -3.6368834e-07, -0.19953161)
bones/74/rotation = Quaternion(-0.6006687, -0.029219054, -0.37930372, 0.70318705)
bones/75/position = Vector3(-0.003282902, 0.06529085, -0.07305469)
bones/75/scale = Vector3(0.92616504, 0.92616504, 0.926165)
bones/76/position = Vector3(0.084754065, 0.11508268, -0.10093564)
bones/76/scale = Vector3(0.8517222, 0.8517221, 0.85172236)
bones/77/position = Vector3(0.3879296, 0.021243244, -0.19286563)
bones/77/scale = Vector3(0.9144398, 0.9144398, 0.91443974)
bones/78/position = Vector3(0.0730336, -1.1140486e-07, -0.2725654)
bones/78/rotation = Quaternion(-0.68546355, 0.026282484, -0.23308514, 0.6892897)
bones/78/scale = Vector3(0.9999999, 1.0000001, 1)
bones/79/position = Vector3(-0.039910123, 0.067813426, -0.08600972)
bones/79/scale = Vector3(0.9261652, 0.9261651, 0.9261652)
bones/80/position = Vector3(0.07680407, 0.097482875, -0.11141694)
bones/80/scale = Vector3(0.85172224, 0.8517222, 0.8517221)
bones/81/position = Vector3(0.3159145, -0.047889486, -0.27414525)
bones/81/scale = Vector3(0.9144401, 0.91444016, 0.91444016)
bones/82/position = Vector3(-0.07303362, -4.7284556e-07, 0.27256516)
bones/82/rotation = Quaternion(0.033205926, 0.58691454, 0.71837544, 0.37197518)
bones/82/scale = Vector3(0.99999976, 0.99999976, 0.9999999)
bones/83/position = Vector3(0.008313747, 0.26331884, -0.075874165)
bones/83/scale = Vector3(0.9261653, 0.926165, 0.92616516)
bones/84/position = Vector3(-0.091744706, 0.092748016, -0.09543081)
bones/84/rotation = Quaternion(2.2048289e-07, 0.000106944346, -2.142813e-07, 1)
bones/84/scale = Vector3(0.85172236, 0.85172236, 0.85172236)
bones/85/position = Vector3(-0.24079801, -0.22123861, -0.3495333)
bones/85/scale = Vector3(0.91444016, 0.91444, 0.91444016)
bones/86/position = Vector3(-0.19953153, -4.6575792e-08, 0.19953164)
bones/86/rotation = Quaternion(-0.30491918, 0.5076803, 0.68682015, 0.42138246)
bones/86/scale = Vector3(0.9999997, 0.9999999, 1.0000001)
bones/87/position = Vector3(-0.02852213, 0.2761303, -0.040445544)
bones/87/scale = Vector3(0.92752784, 0.92752784, 0.9275279)
bones/88/position = Vector3(-0.04584369, 0.095262446, -0.123011)
bones/88/rotation = Quaternion(2.4137506e-07, -3.5657115e-07, 4.966686e-08, 1)
bones/88/scale = Vector3(0.85721934, 0.85721904, 0.8572191)
bones/89/position = Vector3(-0.014174602, 0.009518117, -0.4029259)
bones/89/scale = Vector3(0.91627073, 0.91627073, 0.9162707)
bones/90/position = Vector3(-0.27256516, 4.3667377e-08, 0.07303372)
bones/90/rotation = Quaternion(-0.4233645, 0.35903308, 0.63404006, 0.5383782)
bones/91/position = Vector3(-0.08020214, 0.2635966, -0.018423423)
bones/91/scale = Vector3(0.92616504, 0.9261654, 0.9261652)
bones/92/position = Vector3(-0.055612937, 0.09154203, -0.12721269)
bones/92/scale = Vector3(0.851722, 0.85172194, 0.851722)
bones/93/position = Vector3(-0.12092188, 0.14103694, -0.3381369)
bones/93/scale = Vector3(0.91444004, 0.91443974, 0.91443986)
bones/94/position = Vector3(-0.27256522, -2.8181154e-07, -0.07303355)
bones/94/rotation = Quaternion(-0.6213092, 0.41317788, 0.39425537, 0.5364902)
bones/94/scale = Vector3(1.0000004, 1.0000002, 0.99999994)
bones/95/position = Vector3(-0.09076503, 0.23096314, -0.064214565)
bones/95/scale = Vector3(0.927528, 0.9275279, 0.92752814)
bones/96/position = Vector3(0.012091043, 0.08331368, -0.12939262)
bones/96/scale = Vector3(0.85721904, 0.85721916, 0.8572185)
bones/97/position = Vector3(-0.07327103, 0.12464428, -0.357808)
bones/97/scale = Vector3(0.91627055, 0.9162705, 0.9162706)
bones/98/position = Vector3(-0.19953151, -3.7932722e-07, -0.19953147)
bones/98/rotation = Quaternion(-0.6006687, 0.029219098, 0.37930372, 0.70318705)
bones/99/position = Vector3(-0.12911317, 0.17122717, 0.0041934648)
bones/99/scale = Vector3(0.92616487, 0.926165, 0.9261652)
bones/100/position = Vector3(-0.044893622, 0.083225384, -0.12418577)
bones/100/scale = Vector3(0.8517221, 0.85172236, 0.8517221)
bones/101/position = Vector3(-0.33147275, -0.02393055, -0.22580603)
bones/101/scale = Vector3(0.91444016, 0.91444004, 0.91444)
bones/102/position = Vector3(-0.07303357, -1.59915e-07, -0.27256534)
bones/102/rotation = Quaternion(-0.6854587, -0.026296813, 0.23309937, 0.6892891)
bones/102/scale = Vector3(1, 1.0000002, 1.0000002)
bones/103/position = Vector3(-0.125916, 0.12097215, -0.019713342)
bones/103/scale = Vector3(0.92616516, 0.9261651, 0.9261652)
bones/104/position = Vector3(-0.02693764, 0.08149682, -0.13135433)
bones/104/scale = Vector3(0.8517224, 0.8517223, 0.8517223)
bones/105/position = Vector3(-0.07629305, -0.124706104, -0.36994913)
bones/105/scale = Vector3(0.9144401, 0.91444016, 0.9144401)

[node name="Cape" parent="root/Skeleton3D" index="0" unique_id=1246953316]
surface_material_override/0 = ExtResource("2_hf0kq")

[node name="AnimationPlayer" parent="." index="1" unique_id=1673082069]
libraries/ = ExtResource("2_xkx46")

[node name="AnimationTree" type="AnimationTree" parent="." index="2" unique_id=1765817144]
tree_root = SubResource("AnimationNodeBlendTree_wvdep")
anim_player = NodePath("../AnimationPlayer")
parameters/Movement/current_state = "Idle"
parameters/Movement/transition_request = ""
parameters/Movement/current_index = 0
